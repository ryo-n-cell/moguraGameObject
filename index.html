<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<title>もぐらたたきゲーム</title>
	<link rel="stylesheet" type="text/css" href="./css/style.css">
</head>

<body id="game">
	<div class="field">
		<h1><img onmouseover="hello()" src="images/title.png" alt=""></h1>

		<div class="container">
			<div class="relative">
				<img class="ana" src="images/穴.png">
				<img class="mogura uwagaki" src="">
			</div>
			<div class="relative">
				<img class="ana" src="images/穴.png">
				<img class="mogura uwagaki" src="">
			</div>
			<div class="relative">
				<img class="ana" src="images/穴.png">
				<img class="mogura uwagaki" src="">
			</div>
		</div>
		<div class="container">
			<div class="relative">
				<img class="ana" src="images/穴.png">
				<img class="mogura uwagaki" src="">
			</div>
			<div class="relative">
				<img class="ana" src="images/穴.png">
				<img class="mogura uwagaki" src="">
			</div>
			<div class="relative">
				<img class="ana" src="images/穴.png">
				<img class="mogura uwagaki" src="">
			</div>
		</div>
		<div class="container">
			<div class="relative">
				<img class="ana" src="images/穴.png">
				<img class="mogura uwagaki" src="">
			</div>
			<div class="relative">
				<img class="ana" src="images/穴.png">
				<img class="mogura uwagaki" src="">
			</div>
			<div class="relative">
				<img class="ana" src="images/穴.png">
				<img class="mogura uwagaki" src="">
			</div>
		</div>
	</div>

	<script>
		let moguras = []

		function Mogura (el) {
			this.body = el
			this.face = {
				hide: "", // 隠れている時
				normal: "images/mogura/normal.png", // 出現した時
				hit: "images/mogura/hit.png", // 叩かれた時
			},

			this.hit = () => {
				this.body.src = this.face.hit
				setTimeout(this.hide, 200)
			}
			this.appear = () => {
				this.body.src = this.face.normal
			}
			this.hide = () => {
				this.body.src = this.face.hide
				setTimeout(this.appear, 3000 * Math.random())
			}

			this.hide()
			this.body.onclick = this.hit
		}

		function initialize () {
			// 全てのモグラに対して、クリックされたイベントを登録する
			let arr = document.getElementsByClassName("mogura") // 9体分のモグラ
			for (let i=0; i < arr.length; i ++) {
				moguras.push(new Mogura(arr[i]))
			}
		}

		initialize ()

	</script>
</body>

</html>