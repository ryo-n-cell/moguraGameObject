<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
  <title>もぐらたたきゲーム</title>
  <link rel="stylesheet" href="css/style.css" type="text/css">
</head>

<body id="game">
	<div class="field">
    <h1><img src="images/title.png" alt=""></h1>
    <h3>スコア</h3>

		<div class="container">
			<div class="relative">
				<img class="ana" src="images/穴.png">
				<img class="mogura uwagaki" src="">
			</div>
			<div class="relative">
				<img class="ana" src="images/穴.png">
				<img class="mogura uwagaki" src="">
			</div>
			<div class="relative">
				<img class="ana" src="images/穴.png">
				<img class="mogura uwagaki" src="">
			</div>
		</div>
		<div class="container">
			<div class="relative">
				<img class="ana" src="images/穴.png">
				<img class="mogura uwagaki" src="">
			</div>
			<div class="relative">
				<img class="ana" src="images/穴.png">
				<img class="mogura uwagaki" src="">
			</div>
			<div class="relative">
				<img class="ana" src="images/穴.png">
				<img class="mogura uwagaki" src="">
			</div>
		</div>
		<div class="container">
			<div class="relative">
				<img class="ana" src="images/穴.png">
				<img class="mogura uwagaki" src="">
			</div>
			<div class="relative">
				<img class="ana" src="images/穴.png">
				<img class="mogura uwagaki" src="">
			</div>
			<div class="relative">
				<img class="ana" src="images/穴.png">
				<img class="mogura uwagaki" src="">
			</div>
		</div>
	</div>

	<script>
    let moguras = []
    var countUpValue = 0

    function gameMaster(){
      this.hitCount = () => {
        countUpValue++;
        console.log(countUpValue);
      }
    }

		function Mogura (el) {
      this.gameMaster = gameMaster
			this.body = el
			this.face = {
				hide: "", // 隠れている時
				normal: "images/mogura/normal.png", // 出現した時
				hit: "images/mogura/hit.png", // 叩かれた時
			},
      this.hit = () => {
        this.gameMaster.hitCount()
				this.body.src = this.face.hit
				setTimeout(this.hide, 200)
			}
			this.appear = () => {
				this.body.src = this.face.normal
			}
			this.hide = () => {
				this.body.src = this.face.hide
				setTimeout(this.appear, 3000 * Math.random())
			}

			this.hide()
			this.body.onclick = this.hit
		}

		function initialize () {
			// 全てのモグラに対して、クリックされたイベントを登録する
			let arr = document.getElementsByClassName("mogura") // 9体分のモグラ
			for (let i=0; i < arr.length; i ++) {
				moguras.push(new Mogura(arr[i]))
			}
		}

    initialize ()

    countScore()
    
    function countScore(){
      alert("Start")
      setTimeout(() => alert("END"),10000);
    }
	</script>
</body>

</html>

<!-- データは何を持っているか？
どのような動き（メソッド）をするのか？
→モグラはどんなデータを持っている？
  1. 通常の顔の画像データ
  2. 叩かれた時の顔の画像データ
  モグラができることは何？
  1. 叩かれると消えることができる
  2. 叩かれると、痛い顔になる
  3. 穴から出現することができる -->